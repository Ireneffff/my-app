/* FILE: app/globals.css */
/* Tailwind v4: import unico. Evita @tailwind base/components/utilities (v3). */
@import "tailwindcss";

/* ---- Theme tokens (light/dark) ---- */
:root {
  --bg: 244 246 250;
  --surface: 252 253 255;
  --subtle: 240 243 248;
  --fg: 23 25 28;
  --muted-fg: 112 116 122;
  --border: 7 13 29 / 0.08;
  --shadow: 15 23 42 / 0.06;
  --accent: 0 122 255;
  --glass-border: 255 255 255 / 0.55;
  --glass-overlay: 255 255 255 / 0.68;
  --focus-ring: 0 122 255 / 0.25;
}

:root.dark {
  --bg: 17 19 23;
  --surface: 26 29 36;
  --subtle: 22 24 30;
  --fg: 235 236 239;
  --muted-fg: 157 160 169;
  --border: 240 243 255 / 0.12;
  --shadow: 0 0 0 / 0.32;
  --accent: 64 156 255;
  --glass-border: 255 255 255 / 0.18;
  --glass-overlay: 255 255 255 / 0.08;
  --focus-ring: 64 156 255 / 0.25;
}

/* ---- Token utilities (usate nei componenti) ---- */
.bg-bg { background-color: rgb(var(--bg)); }
.bg-surface { background-color: rgb(var(--surface)); }
.bg-subtle { background-color: rgb(var(--subtle)); }
.text-fg { color: rgb(var(--fg)); }
.text-muted-fg { color: rgb(var(--muted-fg)); }
.border-border { border-color: color-mix(in srgb, rgba(var(--border)) 100%, transparent); }
.bg-accent { background-color: rgb(var(--accent)); }
.text-accent { color: rgb(var(--accent)); }
.pill-date {
  background-color: color-mix(in srgb, rgb(var(--muted-fg)) 12%, transparent);
  color: rgb(var(--muted-fg));
}
.pill-time {
  background-color: color-mix(in srgb, rgb(var(--accent)) 14%, transparent);
  color: rgb(var(--accent));
}

.surface-panel {
  border-radius: 2.75rem;
  background-color: color-mix(in srgb, rgba(var(--surface)) 82%, rgba(var(--glass-overlay)) 18%);
  border: 1px solid color-mix(in srgb, rgba(var(--border)) 70%, rgba(var(--glass-border)) 30%);
  box-shadow: 0 26px 60px rgba(var(--shadow));
  backdrop-filter: blur(20px);
  transition: transform 360ms ease, box-shadow 360ms ease, border-color 360ms ease;
}

.surface-panel--compact {
  border-radius: 1.75rem;
  background-color: color-mix(in srgb, rgba(var(--surface)) 88%, rgba(var(--glass-overlay)) 12%);
  border: 1px solid color-mix(in srgb, rgba(var(--border)) 75%, rgba(var(--glass-border)) 25%);
  box-shadow: 0 22px 48px rgba(var(--shadow));
  backdrop-filter: blur(18px);
  transition: transform 360ms ease, box-shadow 360ms ease, border-color 360ms ease;
}

.surface-panel--compact:is(:hover, :focus-within) {
  transform: translateY(-4px);
  box-shadow: 0 32px 64px rgba(var(--shadow));
  border-color: color-mix(in srgb, rgba(var(--border)) 40%, rgba(var(--accent)) 14%);
}

@media (prefers-reduced-motion: reduce) {
  .surface-panel,
  .surface-panel--compact,
  .surface-panel--compact:is(:hover, :focus-within) {
    transition: none;
    transform: none;
  }
}

/* ---- Layout helpers ---- */
.container { max-width: 1200px; margin-inline: auto; }

body {
  position: relative;
  min-height: 100dvh;
  background: rgb(var(--bg));
  color: rgb(var(--fg));
  font-family: "SF Pro Display", "SF Pro Text", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  line-height: 1.58;
  -webkit-font-smoothing: antialiased;
  transition: background 420ms ease, color 280ms ease;
}

body::before {
  content: "";
  position: fixed;
  inset: -20vmax;
  background:
    radial-gradient(42% 42% at 20% 20%, rgba(var(--accent) / 0.08), transparent 65%),
    radial-gradient(46% 46% at 78% 18%, rgba(255 255 255 / 0.22), transparent 68%),
    linear-gradient(135deg, rgba(255 255 255 / 0.58), rgba(var(--bg) / 0.55));
  opacity: 0.92;
  z-index: -2;
  pointer-events: none;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: linear-gradient(180deg, rgba(255 255 255 / 0.55) 0%, rgba(var(--bg) / 0.82) 42%, rgba(var(--bg) / 0.96) 100%);
  z-index: -1;
  pointer-events: none;
}

a {
  color: inherit;
  text-decoration: none;
  transition: color 240ms ease-in-out;
}

a:hover {
  color: color-mix(in srgb, rgb(var(--fg)) 80%, rgb(var(--accent)) 20%);
}

.app-shell {
  position: relative;
  min-height: 100dvh;
  display: flex;
  flex-direction: column;
  isolation: isolate;
}

.app-shell::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, rgba(255 255 255 / 0.68) 0%, rgba(255 255 255 / 0.32) 28%, rgba(var(--bg) / 0.9) 100%);
  mix-blend-mode: screen;
  pointer-events: none;
  opacity: 0.65;
  z-index: -1;
}

.app-shell__page {
  position: relative;
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 100dvh;
  opacity: 0;
  transform: translate3d(0, 18px, 0);
  transition: opacity 420ms ease-in-out, transform 420ms ease-in-out;
}

.app-shell__page--ready {
  opacity: 1;
  transform: translate3d(0, 0, 0);
}

.app-shell__page::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 32px;
  pointer-events: none;
  opacity: 0;
  transition: opacity 360ms ease;
}

.app-shell__page--ready::after {
  opacity: 1;
}

@media (prefers-reduced-motion: reduce) {
  body,
  a,
  .app-shell__page,
  .app-shell__page::after {
    transition: none;
  }

  .app-shell__page {
    transform: none;
    opacity: 1;
  }
}

::selection {
  background: rgba(var(--accent) / 0.18);
  color: rgb(var(--fg));
}

/* Accessibilit√†: focus visibile coerente */
.focus-ring:focus-visible { outline: none; }

/* Screen-reader-only (toggleable al focus) */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.sr-only:focus {
  position: static;
  width: auto;
  height: auto;
  clip: auto;
  margin: 0;
  padding: .25rem .5rem;
  border-radius: .75rem;
  background: color-mix(in srgb, rgb(var(--accent)) 12%, transparent);
}

/* iOS tap highlight meno invasivo */
* { -webkit-tap-highlight-color: rgba(0, 0, 0, 0.04); }

button:focus,
button:focus-visible,
input:focus,
input:focus-visible,
select:focus,
select:focus-visible,
textarea:focus,
textarea:focus-visible,
[role="button"]:focus,
[role="button"]:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px rgba(var(--focus-ring));
}

button,
input,
select,
textarea,
[role="button"] {
  transition: background-color 240ms ease-in-out, box-shadow 260ms ease-in-out,
    color 220ms ease-in-out, border-color 220ms ease-in-out, transform 240ms ease-in-out;
}

@keyframes soft-fade-in {
  from {
    opacity: 0;
    transform: translateY(12px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes subtle-pop {
  from {
    opacity: 0;
    transform: scale(0.96);
  }

  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-soft-fade-in {
  animation: soft-fade-in 420ms ease forwards;
}

.animate-subtle-pop {
  animation: subtle-pop 320ms ease forwards;
}

