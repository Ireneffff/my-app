/* FILE: app/globals.css */
/* Tailwind v4: import unico. Evita @tailwind base/components/utilities (v3). */
@import "tailwindcss";

/* ---- Theme tokens (light/dark) ---- */
:root {
  --bg: 244 246 251;
  --surface: 255 255 255;
  --subtle: 245 247 252;
  --fg: 24 24 26;
  --muted-fg: 112 116 125;
  --border: 15 23 42 / 0.08;
  --border-strong: 15 23 42 / 0.14;
  --shadow: 15 23 42 / 0.16;
  --shadow-soft: 15 23 42 / 0.08;
  --accent: 0 122 255;
  --glass-tint: 255 255 255 / 0.72;
  --glass-highlight: 255 255 255 / 0.4;
  --radius-xl: 28px;
  --radius-lg: 22px;
  --radius-md: 16px;
  --radius-sm: 12px;
  --easing-standard: cubic-bezier(0.16, 1, 0.3, 1);
}

:root.dark {
  --bg: 12 13 17;
  --surface: 21 23 28;
  --subtle: 30 32 37;
  --fg: 236 237 240;
  --muted-fg: 150 153 162;
  --border: 255 255 255 / 0.12;
  --border-strong: 255 255 255 / 0.18;
  --shadow: 0 0 0 / 0.32;
  --shadow-soft: 0 0 0 / 0.24;
  --accent: 80 170 255;
  --glass-tint: 21 23 28 / 0.82;
  --glass-highlight: 255 255 255 / 0.1;
}

/* ---- Token utilities (usate nei componenti) ---- */
.bg-bg { background-color: rgb(var(--bg)); }
.bg-surface { background-color: rgb(var(--surface)); }
.bg-subtle { background-color: rgb(var(--subtle)); }
.text-fg { color: rgb(var(--fg)); }
.text-muted-fg { color: rgb(var(--muted-fg)); }
.border-border { border-color: color-mix(in srgb, rgba(var(--border)) 100%, transparent); }
.bg-accent { background-color: rgb(var(--accent)); }
.text-accent { color: rgb(var(--accent)); }
.pill-date {
  background-color: color-mix(in srgb, rgb(var(--muted-fg)) 12%, transparent);
  color: rgb(var(--muted-fg));
}
.pill-time {
  background-color: color-mix(in srgb, rgb(var(--accent)) 14%, transparent);
  color: rgb(var(--accent));
}

.surface-panel {
  border-radius: var(--radius-xl);
  background: linear-gradient(
      145deg,
      color-mix(in srgb, rgb(var(--glass-highlight)) 40%, rgba(var(--glass-tint))) 0%,
      rgba(var(--glass-tint)) 52%,
      color-mix(in srgb, rgb(var(--glass-highlight)) 60%, rgba(var(--glass-tint))) 100%
    );
  border: 1px solid color-mix(in srgb, rgba(var(--border)) 90%, transparent);
  box-shadow: 0 28px 60px rgba(var(--shadow));
  backdrop-filter: saturate(160%) blur(20px);
  transition: transform 360ms var(--easing-standard),
    box-shadow 360ms var(--easing-standard),
    border-color 360ms var(--easing-standard);
}

.surface-panel--compact {
  border-radius: var(--radius-lg);
  background: linear-gradient(
      160deg,
      color-mix(in srgb, rgb(var(--glass-highlight)) 46%, rgba(var(--glass-tint))) 0%,
      rgba(var(--glass-tint)) 60%,
      color-mix(in srgb, rgb(var(--glass-highlight)) 20%, rgba(var(--glass-tint))) 100%
    );
  border: 1px solid color-mix(in srgb, rgba(var(--border)) 80%, transparent);
  box-shadow: 0 22px 50px rgba(var(--shadow-soft));
  backdrop-filter: saturate(160%) blur(18px);
  transition: transform 320ms var(--easing-standard),
    box-shadow 320ms var(--easing-standard),
    border-color 320ms var(--easing-standard);
}

.surface-panel--compact:hover,
.surface-panel:hover {
  transform: translateY(-4px);
  box-shadow: 0 30px 70px rgba(var(--shadow));
  border-color: color-mix(in srgb, rgba(var(--border-strong)) 90%, transparent);
}

/* ---- Layout helpers ---- */
.container { max-width: 1200px; margin-inline: auto; }

body {
  background-color: rgb(var(--bg));
  color: rgb(var(--fg));
  font-family: "SF Pro Display", "SF Pro Text", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  line-height: 1.55;
  -webkit-font-smoothing: antialiased;
  transition: background-color 420ms var(--easing-standard),
    color 420ms var(--easing-standard);
  min-height: 100dvh;
}

body::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -1;
  background:
    radial-gradient(140% 120% at 50% 0%, rgb(var(--surface) / 0.65) 0%, transparent 60%),
    radial-gradient(120% 140% at 0% 100%, rgb(var(--accent) / 0.08) 0%, transparent 70%),
    radial-gradient(120% 140% at 100% 100%, rgba(136, 180, 255, 0.08) 0%, transparent 72%);
  pointer-events: none;
  transition: opacity 600ms var(--easing-standard);
}

:root.dark body::before {
  background:
    radial-gradient(140% 120% at 50% -10%, rgb(var(--surface) / 0.4) 0%, transparent 58%),
    radial-gradient(120% 140% at 0% 100%, rgb(var(--accent) / 0.1) 0%, transparent 70%),
    radial-gradient(120% 140% at 100% 100%, rgba(40, 70, 120, 0.22) 0%, transparent 80%);
}

main {
  position: relative;
  display: flex;
  flex-direction: column;
  min-height: 100dvh;
  isolation: isolate;
}

.page-shell {
  width: min(100%, 1080px);
  margin-inline: auto;
  padding-inline: clamp(1.5rem, 3vw, 2.75rem);
}

.page-shell--wide {
  width: min(100%, 1760px);
}

.page-section {
  display: flex;
  flex-direction: column;
  gap: clamp(2.5rem, 5vw, 4rem);
}

.section-heading {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  text-align: center;
}

.section-heading p {
  color: rgb(var(--muted-fg));
  letter-spacing: 0.08em;
  text-transform: uppercase;
  font-size: 0.8rem;
}

.section-heading h1,
.section-heading h2 {
  font-weight: 600;
  letter-spacing: -0.02em;
}

a { color: inherit; text-decoration: none; }

/* Accessibilit√†: focus visibile coerente */
.focus-ring:focus-visible { outline: none; }

/* Screen-reader-only (toggleable al focus) */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.sr-only:focus {
  position: static;
  width: auto;
  height: auto;
  clip: auto;
  margin: 0;
  padding: .25rem .5rem;
  border-radius: .75rem;
  background: color-mix(in srgb, rgb(var(--accent)) 12%, transparent);
}

/* iOS tap highlight meno invasivo */
* { -webkit-tap-highlight-color: rgba(0, 0, 0, 0.04); }

button:focus,
button:focus-visible,
input:focus,
input:focus-visible,
select:focus,
select:focus-visible,
textarea:focus,
textarea:focus-visible,
[role="button"]:focus,
[role="button"]:focus-visible {
  outline: none;
  box-shadow: none;
}

.interactive-area {
  transition: transform 360ms var(--easing-standard),
    box-shadow 360ms var(--easing-standard),
    border-color 360ms var(--easing-standard),
    background-color 360ms var(--easing-standard);
}

button,
[role="button"],
input,
textarea,
select,
a {
  transition: color 260ms var(--easing-standard),
    background-color 260ms var(--easing-standard),
    border-color 260ms var(--easing-standard),
    box-shadow 260ms var(--easing-standard);
}

.last-opened-trade-card {
  animation: last-opened-trade-scale 2.6s var(--easing-standard);
}

.last-opened-trade-card::after {
  content: "";
  position: absolute;
  inset: -6px;
  border-radius: inherit;
  pointer-events: none;
  opacity: 0;
  border: 2px solid rgb(var(--accent) / 0.22);
  box-shadow:
    0 0 24px rgb(var(--accent) / 0.45),
    0 0 0 0 rgb(var(--accent) / 0.3);
  animation: last-opened-trade-glow 2.6s ease-out;
}

@keyframes last-opened-trade-scale {
  0% {
    transform: scale(0.985);
  }

  55% {
    transform: scale(1.01);
  }

  100% {
    transform: scale(1);
  }
}

@keyframes last-opened-trade-glow {
  0% {
    opacity: 0;
    box-shadow:
      0 0 18px rgb(var(--accent) / 0.3),
      0 0 0 0 rgb(var(--accent) / 0.22);
  }

  35% {
    opacity: 1;
    box-shadow:
      0 0 24px rgb(var(--accent) / 0.45),
      0 0 0 2px rgb(var(--accent) / 0.2);
  }

  70% {
    opacity: 0;
    box-shadow:
      0 0 0 rgb(var(--accent) / 0),
      0 0 0 28px rgb(var(--accent) / 0);
  }

  100% {
    opacity: 0;
    box-shadow:
      0 0 0 rgb(var(--accent) / 0),
      0 0 0 0 rgb(var(--accent) / 0);
  }
}

.library-carousel-track {
  border-radius: var(--radius-lg);
  background: linear-gradient(
    165deg,
    color-mix(in srgb, rgb(var(--subtle)) 78%, rgb(var(--surface)) 22%) 0%,
    rgb(var(--surface)) 38%,
    color-mix(in srgb, rgb(var(--subtle)) 66%, rgb(var(--surface)) 34%) 100%
  );
  border: 1px solid
    color-mix(
      in srgb,
      color-mix(in srgb, rgb(148 163 184) 68%, rgb(100 116 139) 32%) 50%,
      rgba(var(--border)) 50%
    );
  box-shadow: 0 22px 56px rgba(var(--shadow-soft));
  padding-block: 0.8rem;
  padding-inline: 1rem;
  scrollbar-width: none;
  transition: box-shadow 320ms var(--easing-standard),
    border-color 320ms var(--easing-standard),
    background 320ms var(--easing-standard);
}

.library-carousel-track:hover {
  border-color: color-mix(in srgb, rgba(var(--border-strong)) 82%, rgb(148 163 184) 18%);
  box-shadow: 0 28px 70px rgba(var(--shadow));
  scrollbar-width: thin;
  scrollbar-color: color-mix(in srgb, rgb(var(--muted-fg)) 26%, rgb(148 163 184 / 36%)) transparent;
}

.library-carousel-track::-webkit-scrollbar {
  height: 0;
  width: 0;
  background: transparent;
}

.library-carousel-track::-webkit-scrollbar-thumb {
  border-radius: 999px;
  background: transparent;
}

.library-carousel-track:hover::-webkit-scrollbar {
  height: 8px;
  width: 8px;
}

.library-carousel-track:hover::-webkit-scrollbar-thumb {
  background: color-mix(in srgb, rgb(var(--muted-fg)) 20%, rgb(148 163 184 / 36%));
}

.library-carousel-card {
  transition: transform 360ms var(--easing-standard),
    box-shadow 360ms var(--easing-standard),
    filter 360ms var(--easing-standard),
    opacity 360ms var(--easing-standard);
}

.library-carousel-card-wrapper[data-reordering="true"] .library-carousel-card {
  animation: library-card-reorder 520ms var(--easing-standard);
}

@keyframes library-card-reorder {
  0% {
    transform: translateY(6px) scale(0.97);
    box-shadow: 0 14px 38px -26px rgb(15 23 42 / 0.35);
  }

  60% {
    transform: translateY(-2px) scale(1.01);
    box-shadow: 0 20px 60px -30px rgb(15 23 42 / 0.38);
  }

  100% {
    transform: translateY(0) scale(1);
    box-shadow: inherit;
  }
}

.tab-transition-panel {
  width: 100%;
  opacity: 1;
  transform: translateY(0);
  transition: opacity 220ms ease, transform 220ms ease;
  will-change: opacity, transform;
}

.tab-transition-panel--exiting {
  opacity: 0;
  transform: translateY(8px);
}

@media (prefers-reduced-motion: reduce) {
  .tab-transition-panel {
    transition-duration: 140ms;
    transform: none;
  }

  .tab-transition-panel--exiting {
    transform: none;
  }
}

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001ms !important;
    scroll-behavior: auto !important;
  }

  body::before {
    display: none;
  }
}

